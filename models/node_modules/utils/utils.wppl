var foreach = function(lst, fn) {
    var foreach_ = function(i) {
        if (i < lst.length) {
            fn(lst[i]);
            foreach_(i + 1);
        }
    };
    foreach_(0);
};

var marginalizeERP = function(myERP, label){
	Enumerate(function(){
		var x = sample(myERP)
		return x[label]
	})
}


var discretizeBeta = function(gamma, delta){
	var shape_alpha =  gamma * delta
	var shape_beta = (1-gamma) * delta
	var betaPDF = function(x){
	  return Math.pow(x,shape_alpha-1)*Math.pow((1-x),shape_beta-1)
	}
	return map(betaPDF, [0.1,0.3,0.5,0.7,0.9])
}

// use first row as (header) variable names
// var dataFrame = function(rawCSV){
//     return map(function(row){
//         return _.object(_.zip(rawCSV[0],row))
//     }, rawCSV.slice(1))
// }

// this version of dataFrame makes sure the numerical data is turned into a float
var dataFrame = function(d, fieldsToNumerify){
    return map(
        function(lst){
            return _.object(map(function(l){
                return _.indexOf(fieldsToNumerify, l[0]) > -1 ? 
                            [l[0], utils.wpParseFloat(l[1])] : l
            },
            _.zip(d[0],lst)
            ))
        },
        d.slice(1))
}

var fillArray = function(n, val){
    return repeat(n, function(x){return val})
}